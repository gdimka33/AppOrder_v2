from База_данных.БД_соединение import выполнить_запрос
from logger import logger

def заполнить_справочник_постов():
    """Заполняет справочник постов начальными данными"""
    посты = [
        ('Ответственный от руководства', 1, 1, 1, 0, 0, 0),
        ('Начальник служебного наряда', 1, 1, 1, 0, 0, 0),
        ('Помощник начальника служебного наряда', 1, 1, 1, 1, 0, 0),
        ('Дежурный водитель', 1, 1, 1, 0, 0, 0),
        ('КПП-1', 1, 1, 0, 1, 1, 1),
        ('КПП-2', 1, 1, 0, 1, 0, 0),
        ('КПП-3', 1, 1, 0, 1, 1, 3),
        ('Патруль', 1, 1, 0, 1, 1, 3),
        ('Общежитие', 1, 1, 0, 1, 1, 1),
        ('Учебные корпуса', 1, 1, 0, 1, 1, 5),
        ('1-ый этаж общежития', 1, 1, 0, 1, 1, 2),
        ('2-ый этаж общежития', 1, 1, 0, 1, 1, 2),
        ('3-ый этаж общежития', 1, 1, 0, 1, 1, 2),
        ('4-ый этаж общежития', 1, 1, 0, 1, 1, 2),
        ('5-ый этаж общежития', 1, 1, 0, 1, 1, 2),
        ('Спортивный комплекс', 1, 1, 0, 1, 1, 1),
        ('Столовая', 1, 1, 0, 1, 1, 11),
        ('Изолятор', 1, 1, 0, 1, 1, 1)
    ]
    try:
        результат = выполнить_запрос("SELECT COUNT(*) as count FROM посты")
        if результат and результат[0]['count'] > 0:
            logger.info("Справочник постов уже заполнен")
            return
        for пост in посты:
            выполнить_запрос(
                """INSERT INTO посты (
                    наименование, дежурный, дежурный_кол, 
                    дежурный_офицер, дежурный_курсант, 
                    дневальный, дневальный_кол
                ) VALUES (?, ?, ?, ?, ?, ?, ?)""",
                пост
            )
        logger.info("Справочник постов успешно заполнен")
    except Exception as e:
        logger.error(f"Ошибка при заполнении справочника постов: {e}")
        raise
